{
  "rules": {
    "users": {
      "$userId": {
        ".read": "auth.uid == $userId",
        ".write": "
          auth.uid == $userId ||
          (
            root.child('users').child(auth.uid).child('role').val() == 'captain' &&
            root.child('users').child(auth.uid).child('teamId').val() == 
            root.child('users').child($userId).child('teamId').val()
          )
        "
      }
    },
    "teams": {
      "$teamId": {
        "players": {
          "$playerId": {
            ".write": "
              root.child('users').child(auth.uid).child('role').val() == 'captain' &&
              root.child('users').child(auth.uid).child('teamId').val() == $teamId
            "
          }
        }
      }
    }
  }
}
